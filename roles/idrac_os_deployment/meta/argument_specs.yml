---
argument_specs:
  main:
    version_added: "7.5.0"
    short_description: Role to deploy specified operating system and version on the servers.
    description: Role to deploy specified operating system and version on the servers.
    options:
      hostname:
        required: true
        type: str
        description: iDRAC IP Address.
      username:
        required: true
        type: str
        description: iDRAC username.
      password:
        required: true
        type: str
        description: iDRAC user password.
      https_port:
        type: int
        description: iDRAC port.
        default: 443
      validate_certs:
        description:
          - If C(False), the SSL certificates will not be validated.
          - Configure C(False) only on personally controlled sites where self-signed certificates are used.
        type: bool
        default: true
      ca_path:
        description: The Privacy Enhanced Mail (PEM) file that contains a CA certificate to be used for the validation.
        type: path
      https_timeout:
        description: The socket level timeout in seconds.
        type: int
        default: 30
      os_name:
        type: str
        description:
          - The operating system name to match the jinja template of the kickstart file.
        required: true
      os_version:
        type: str
        description:
          - The operating system version to match the jinja template of the kickstart file.
          - Supported versions for RHEL are 9.x and 8.x and for ESXi is 8.x.
        required: true
      source_iso:
        type: dict
        description: Network share or local path of the ISO.
        required: true
        options:
          path:
            type: path
            description:
              - Local path or network share path of the ISO.
              - CIFS, NFS, HTTP and HTTPS shares are supported.
            required: true
          username:
            type: str
            description: Username of the network share.
          password:
            type: str
            description: Password of the network share.
      destination_path:
        type: dict
        description:
          - Share path to mount the ISO to iDRAC.
          - Share needs to have a write permission to copy the generated ISO.
          - CIFS, NFS, HTTP and HTTPS shares are supported.
        required: true
        options:
          path:
            type: path
            description: Path of the network share to copy the customized ISO.
            required: true
          username:
            type: str
            description: Username of the network share destination of customized ISO.
          password:
            type: str
            description: Password of the network share destination of customized ISO.
      kickstart_file:
        type: path
        description:
          - Local path of the kickstart file.
          - Generation of kickstart file will be ignored if a kickstart file is provided.
      os_wait:
        default: true
        type: bool
        description:
          - Wait for the OS deployment to finish.
      os_wait_time:
        description:
          - Time in minutes to wait for the OS deployment to finish.
        default: 30
        type: int
      eject_iso:
        description:
          - Eject the virtual media (ISO) after the tracking of OS deployment is finished.
        default: true
        type: bool
      http_path:
        description: Path to copy custom_iso in http or https share
        type: str
      dest_os:
        description: HTTP/HTTPS share based on linux/Windows.
        type: str
        choices: ['linux', 'windows']
        default: 'linux'
      ssh_user:
        description: Username for SSH login into the target machine where the custom iso will be copied to serve from the http/https repository.
        type: str
      ssh_pass:
        description: Password for SSH login into the target machine where the custom iso will be copied to serve from the http/https repository.
        type: str
