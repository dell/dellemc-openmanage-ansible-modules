---
- hosts: ome
  connection: local
  name: "OME - Create Catalog using Repository."
  gather_facts: False

  collections:
    - dellemc.openmanage

  tasks:
  - name: Create a catalog from HTTPS repository
    ome_firmware_catalog:
      hostname:  "{{ hostname }}"
      username: "{{ username }}"
      password:  "{{ password }}"
      ca_path: "/path/to/ca_cert.pem"
      catalog_name: catalog1
      catalog_description: catalog description
      source: downloads.company.com
      repository_type: HTTPS
      source_path: "catalog"
      file_name: "catalog.gz"
      check_certificate: True
      
  - name: Create a catalog from HTTP repository
    ome_firmware_catalog:
      hostname:  "{{ hostname }}"
      username: "{{ username }}"
      password:  "{{ password }}"
      ca_path: "/path/to/ca_cert.pem"
      catalog_name: "{{ catalog_name }}"
      catalog_description: catalog description
      source: downloads.company.com
      repository_type: HTTP
      source_path: "catalog"
      file_name: "catalog.gz"

  - name: Create a catalog using CIFS share
    ome_firmware_catalog:
      hostname:  "{{ hostname }}"
      username: "{{ username }}"
      password:  "{{ password }}"
      ca_path: "/path/to/ca_cert.pem"
      catalog_name: "{{ catalog_name }}"
      catalog_description: catalog description
      source: "192.166.0.1"
      repository_type: CIFS
      source_path: "cifs/R940"
      file_name: "catalog.gz"
      repository_username: "{{ repository_username }}"
      repository_password: "{{ repository_password }}"
      repository_domain: "{{ repository_domain }}"
      
  - name: Create a catalog using NFS share
    ome_firmware_catalog:
      hostname:  "{{ hostname }}"
      username: "{{ username }}"
      password:  "{{ password }}"
      ca_path: "/path/to/ca_cert.pem"
      catalog_name: "{{ catalog_name }}"
      catalog_description: catalog description
      source: "192.166.0.2"
      repository_type: NFS
      source_path: "/nfs/R940"
      file_name: "catalog.xml"

  - name: Create a catalog using repository from Dell.com
    ome_firmware_catalog:
      hostname: "192.168.0.1"
      username: "username"
      password: "password"
      ca_path: "/path/to/ca_cert.pem"
      catalog_name: "catalog_name"
      catalog_description: "catalog_description"
      repository_type: "DELL_ONLINE"
      check_certificate: True

  - name:  Modify a catalog using a repository from CIFS share
    ome_firmware_catalog:
      hostname:  "{{ hostname }}"
      username: "{{ username }}"
      password:  "{{ password }}"
      ca_path: "/path/to/ca_cert.pem"
      catalog_name: "{{ catalog_name }}"
      catalog_description: new catalog description
      source: "192.166.0.2"
      repository_type: CIFS
      source_path: "cifs/R941"
      file_name: "catalog1.gz"
      repository_username: "{{ repository_username }}"
      repository_password: "{{ repository_password }}"
      repository_domain: "{{ repository_domain }}"

  - name: Modify a catalog using a repository from Dell.com
    ome_firmware_catalog:
      hostname: "192.168.0.1"
      username: "username"
      password: "password"
      ca_path: "/path/to/ca_cert.pem"
      catalog_id: 10
      repository_type: DELL_ONLINE
      new_catalog_name: "new_catalog_name"
      catalog_description: "new_catalog_description"

  - name: Delete catalog using catalog name
    ome_firmware_catalog:
      hostname: "{{ hostname }}"
      username: "{{ username }}"
      password: "{{ password }}"
      ca_path: "/path/to/ca_cert.pem"
      state: absent
      catalog_name: ["catalog_name1", "catalog_name2"]

  - name: Delete catalog using catalog id
    ome_firmware_catalog:
      hostname: "{{ hostname }}"
      username: "{{ username }}"
      password: "{{ password }}"
      ca_path: "/path/to/ca_cert.pem"
      state: absent
      catalog_id: [11, 34]