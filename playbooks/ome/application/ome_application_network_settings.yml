---
- hosts: ome
  connection: local
  name: Dell OpenManage Ansible Application network setting.
  gather_facts: False

  collections:
    - dellemc.openmanage

  tasks:
    - name: Configure universal inactivity timeout
      ome_application_network_settings:
        hostname: "{{hostname}}"
        username: "{{username}}"
        password: "{{password}}"
        ca_path: "/path/to/ca_cert.pem"
        session_inactivity_timeout:
          enable_universal_timeout: true
          universal_timeout: 30
          api_sessions: 90
          gui_sessions: 5
          ssh_sessions: 2
          serial_sessions: 1
      tags:
        - enable_universal_timeout
    - name: Configure API and GUI timeout and sessions
      ome_application_network_settings:
          hostname: "{{hostname}}"
          username: "{{username}}"
          password: "{{password}}"
          ca_path: "/path/to/ca_cert.pem"
          session_inactivity_timeout:
            api_timeout: 20
            api_sessions: 100
            gui_timeout: 25
            gui_sessions: 5
      tags:
        - enable_api_gui_timout_sessions
    - name: Configure timeout and sessions for all parameters
      ome_application_network_settings:
          hostname: "{{hostname}}"
          username: "{{username}}"
          password: "{{password}}"
          ca_path: "/path/to/ca_cert.pem"
          session_inactivity_timeout:
            api_timeout: 20
            api_sessions: 100
            gui_timeout: 15
            gui_sessions: 5
            ssh_timeout: 30
            ssh_sessions: 2
            serial_timeout: 35
            serial_sessions: 1
      tags:
        - enable_all_timeout_sessions
    - name: Disable universal timeout and configure timeout and sessions for other parameters
      ome_application_network_settings:
          hostname: "{{hostname}}"
          username: "{{username}}"
          password: "{{password}}"
          ca_path: "/path/to/ca_cert.pem"
          session_inactivity_timeout:
            enable_universal_timeout: false
            api_timeout: 20
            api_sessions: 100
            gui_timeout: 15
            gui_sessions: 5
            ssh_timeout: 30
            ssh_sessions: 2
            serial_timeout: 35
            serial_sessions: 1
      tags:
        - disa_all_timeout_sessions