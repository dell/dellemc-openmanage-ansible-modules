- '        This module allows erasing System components such as iDRAC,'
- '        BIOS, DIAG, etc., and Storage components such as PERC NV'
- '        cache, Non-volatile memory, Cryptographic erase PD, etc. of'
- '        the server.'
- ''
- 'ADDED IN: version 9.7.0 of dellemc.openmanage'
- ''
- 'OPTIONS (= is mandatory):'
- ''
- '- ca_path'
- '        The Privacy Enhanced Mail (PEM) file that contains a CA'
- '        certificate to be used for the validation.'
- '        default: null'
- '        type: path'
- '        added in: version 5.0.0 of dellemc.openmanage'
- ''
- ''
- = component
- '        List of system and storage components that can be deleted.'
- '        The following are the supported components. AllApps BIOS'
- '        CryptographicErasePD DIAG DPU DrvPack IDRAC LCData'
- '        NonVolatileMemory OverwritePD PERCNVCache ReinstallFW vFlash'
- '        elements: str'
- '        type: list'
- ''
- = idrac_ip
- '        iDRAC IP Address.'
- '        type: str'
- ''
- '- idrac_password'
- '        iDRAC user password.'
- '        If the password is not provided, then the environment variable'
- '        `IDRAC_PASSWORD'' is used.'
- '        Example: export IDRAC_PASSWORD=password'
- '        aliases: [idrac_pwd]'
- '        default: null'
- '        type: str'
- ''
- '- idrac_port'
- '        iDRAC port.'
- '        default: 443'
- '        type: int'
- ''
- '- idrac_user'
- '        iDRAC username.'
- '        If the username is not provided, then the environment variable'
- '        `IDRAC_USERNAME'' is used.'
- '        Example: export IDRAC_USERNAME=username'
- '        default: null'
- '        type: str'
- ''
- '- job_wait'
- '        Whether to wait till completion of the job. This is applicable'
- '        when `power_on'' is `true''.'
- '        `true'' waits for job completion.'
- '        `false'' does not wait for job completion.'
- '        default: true'
- '        type: bool'
- ''
- '- job_wait_timeout'
- '        The maximum wait time of `job_wait'' in seconds. The job is'
- '        tracked only for this duration.'
- '        This option is applicable when `job_wait'' is `true''.'
- '        default: 1200'
- '        type: int'
- ''
- '- power_on'
- '        This parameter allows you to power on the server after the'
- '        erase operation is completed. This is applicable when'
- '        `job_wait'' is `true''.'
- '        `true'' power on the server.'
- '        `false'' does not power on the server.'
- '        default: false'
- '        type: bool'
- ''
- '- resource_id'
- '        Manager ID of the iDRAC.'
- '        default: null'
- '        type: str'
- ''
- '- timeout'
- '        The socket level timeout in seconds.'
- '        default: 30'
- '        type: int'
- '        added in: version 5.0.0 of dellemc.openmanage'
- ''
- ''
- '- validate_certs'
- '        If `false'', the SSL certificates will not be validated.'
- '        Configure `false'' only on personally controlled sites where'
- '        self-signed certificates are used.'
- '        Prior to collection version `5.0.0'', the `validate_certs'' is'
- '        `false'' by default.'
- '        default: true'
- '        type: bool'
- '        added in: version 5.0.0 of dellemc.openmanage'
- ''
- ''
- '- x_auth_token'
- '        Authentication token.'
- '        If the x_auth_token is not provided, then the environment'
- '        variable `IDRAC_X_AUTH_TOKEN'' is used.'
- '        Example: export IDRAC_X_AUTH_TOKEN=x_auth_token'
- '        default: null'
- '        type: str'
- '        added in: version 9.3.0 of dellemc.openmanage'
- ''
- ''
- ''
- 'ATTRIBUTES:'
- ''
- '        check_mode:'
- '          description: Runs task to validate without performing action on the target
    machine.'
- '          support: full'
- '        diff_mode:'
- '          description: Runs the task to report the changes made or to be made.'
- '          support: none'
- ''
- 'NOTES:'
- '      * Run this module from a system that has direct access to'
- '        Dell iDRAC.'
- '      * This module supports only iDRAC9 and above.'
- '      * This module supports IPv4 and IPv6 addresses.'
- ''
- ''
- 'REQUIREMENTS:  python >= 3.9.6'
- ''
- 'AUTHOR: Rajshekar P(@rajshekarp87)'
- ''
- 'EXAMPLES:'
- ''
- '---'
- '- name: Erase a single component and power on the server'
- '  dellemc.openmanage.idrac_system_erase:'
- '    idrac_ip: 198.162.0.1'
- '    idrac_user: username'
- '    idrac_password: passw0rd'
- '    ca_path: "/path/to/ca_cert.pem"'
- '    component: ["BIOS"]'
- '    power_on: true'
- ''
- '- name: Erase multiple components and do not power on the server after the erase
    operation is completed'
- '  dellemc.openmanage.idrac_system_erase:'
- '    idrac_ip: 198.162.0.1'
- '    idrac_user: username'
- '    idrac_password: passw0rd'
- '    ca_path: "/path/to/ca_cert.pem"'
- '    component: ["BIOS", "DIAG", "PERCNVCache"]'
- ''
- '- name: Erase multiple components and do not wait for the job completion'
- '  dellemc.openmanage.idrac_system_erase:'
- '    idrac_ip: 198.162.0.1'
- '    idrac_user: username'
- '    idrac_password: passw0rd'
- '    ca_path: "/path/to/ca_cert.pem"'
- '    component: ["IDRAC", "DPU", "LCData"]'
- '    job_wait: false'
- ''
- ''
- 'RETURN VALUES:'
- '- error_info'
- '        Details of the HTTP Error.'
- '        returned: On HTTP error'
- '        sample:'
- '          error:'
- '            ''@Message.ExtendedInfo'':'
- '            - Message: Unable to complete the operation because the value NonVolatileMemor'
- '                entered for the property Component is not in the list of acceptable
    values.'
- '              MessageArgs:'
- '              - NonVolatileMemor'
- '              - Component'
- '              MessageArgs@odata.count: 2'
- '              MessageId: IDRAC.2.9.SYS426'
- '              RelatedProperties: []'
- '              RelatedProperties@odata.count: 0'
- '              Resolution: Enter a valid value from the enumeration list that Redfish
    service'
- '                supports and retry the operation.For information about valid values,
    see the'
- '                iDRAC User''s Guide available on the support site.'
- '              Severity: Warning'
- '            - Message: The value ''NonVolatileMemor'' for the property Component
    is not in the'
- '                list of acceptable values.'
- '              MessageArgs:'
- '              - NonVolatileMemor'
- '              - Component'
- '              MessageArgs@odata.count: 2'
- '              MessageId: Base.1.12.PropertyValueNotInList'
- '              RelatedProperties: []'
- '              RelatedProperties@odata.count: 0'
- '              Resolution: Choose a value from the enumeration list that the implementation'
- '                can support and resubmit the request if the operation failed.'
- '              Severity: Warning'
- '            code: Base.1.12.GeneralError'
- '            message: A general error has occurred. See ExtendedInfo for more information'
- '        type: dict'
- ''
- '- job_details'
- '        Returns the output for status of the job.'
- '        returned: For system erase operation'
- '        sample:'
- '          ActualRunningStartTime: null'
- '          ActualRunningStopTime: null'
- '          CompletionTime: ''2024-08-06T19:55:01'''
- '          Description: Job Instance'
- '          EndTime: TIME_NA'
- '          Id: JID_229917427823'
- '          JobState: Completed'
- '          JobType: SystemErase'
- '          Message: Job completed successfully.'
- '          MessageArgs: []'
- '          MessageArgs@odata.count: 0'
- '          MessageId: SYS018'
- '          Name: System_Erase'
- '          PercentComplete: 100'
- '          StartTime: ''2024-08-06T19:49:02'''
- '          TargetSettingsURI: null'
- '        type: dict'
- ''
- '- msg'
- '        Status of the component system erase operation.'
- '        returned: always'
- '        sample: Successfully completed the system erase operation.'
- '        type: str'
